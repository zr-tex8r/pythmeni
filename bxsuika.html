<!DOCTYPE html public "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/transitional.dtd">
<html lang="ja">
<head>
<title>BXsuika パッケージ [電脳世界の奥底にて]</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<link rel="stylesheet" href="lib/zrmain.css" type="text/css">
<meta name="keywords" content="みかちゃん,フォント,TeX,dvipdfmx,upTeX,dviout,LaTeX,pTeX,pLaTeX,upLaTeX">
<style type="text/css"><!--
--></style>
<script type="text/javascript" src="lib/jquery-1.3.2.min.js"></script>
<script type="text/javascript" src="lib/zrmain.js"></script>
<script type="text/javascript" defer src="cgiruby/zrcounter.cgi?name=bxsuika"></script>
<script type="text/javascript"><!--
//--></script>
</head>
<body>

<div id="canvas"><!--************************************************-->
<div id="main">

<div id="header">
<table id="site-title"><tr>
<td id="site-title-g">
<img src="image0/texno2.jpg" width="120" height="48"
     alt="ΕΝ Τ&#x1ffc; ΠΥΘΜΕΝΙ ΤΗΣ ΤΕΧΝΟΠΟΛΕΩΣ">
</td>
<td id="site-title-t">
<div id="title">
<span class="lgc">En toi Pythmeni tes TeXnopoleos</span><br>
<span class="ja">［電脳世界の奥底にて］</span>
</div>
</td>
</tr></table>
</div><!--header-->

<div id="navibar">
<span id="navilang">
| <span class="na">en</span>
| <span class="here">ja</span> |
</span>&nbsp;
<a href="./index.html">トップ</a> &gt;
<span class="here">BXsuika パッケージ</span>
</div><!--navibar-->


<div id="maintext">
<h1>BXsuika パッケージ</h1>

<div id="changelog">
<div class="lbl">変更履歴</div>
<ul>
<li>2010/05/16：一部の文章を修正。
</li>
</ul>
</div>

<div id="table-contents"></div>

<div class="section" id="sec-overview">
<h2>概要</h2>

<p>W32TeX の topdftex フィルタと併用して、pdfLaTeX で日本語を使えるようにする
パッケージである。topdftex は元々 ums パッケージ(稲垣淳 氏製作)と併用する
前提で作られているので、ums の改良版といえる。主な改良点は DVI 出力の場合
も同じ出力ができるようにしたことである。(ums にもこの機能はあるが、正しく
動かない。) この時には欧文と同じ形式の DVI が生成されるので、設定次第で
欧文用の DVI ウェアが使える可能性がある。残念ながら、和文組版品質は元の
ums と同じであまり良くない。
</p>

<div class="bend"><span class="lbl">参考：</span> 
topdftex フィルタと ums パッケージを用いた
pdfLaTeX での日本語組版については
W32TeX に含まれる角藤氏による文書
「pdfTeX for Win32 について」
に詳しく述べられている。
以下のコマンドを実行すると該当の PDF 文書が表示される。
<pre>
texdocc jpdfsample.pdf
</pre>
</div>

<div class="bend">
<span class="lbl">参考：</span> pdfLaTeX（を含む 8 ビット欧文 LaTeX）で
日本語で使うための有名なパッケージとして
<a href="http://cjk.ffii.org/">CJK パッケージ</a>（Werner Lemberg 氏製作）
がある。
海外で LaTeX で日本語を扱う場合には大概はこれが使われている。
</div>

<div class="subsection" id="ssec-environ">
<h3>対応環境</h3>

<p>以下のものが必要である。
</p>
<ul>
<li>W32TeX の topdftex フィルタ
</li>
<li>以下の処理系のいずれか
<ul>
<li>pdfLaTeX2e (pdfTeX 1,40.10 以降)
</li>
<li>欧文 LaTeX2e + dvipdfmx
</li>
<li>欧文 LaTeX2e + Unicode subfont 対応の DVI ウェア
（機能制限あり）
</li>
</ul>
</li>
</ul>

<div class="bend">
<p><span class="lbl">参考：</span> W32TeX において 
topdftex は pdfTeX 本体とともに pdftex-w32.tar.bz2 
アーカイブに含まれている。
このプログラムは C 言語のソースも公開されている
（W32TeX のソースアーカイブ w32tex-src に含まれる）ので、
W32TeX 以外の環境でも本パッケージを使えるかもしれない。
</p>
</div>

</div><!--ssec-environ-->

<div class="subsection" id="ssec-download">
<h3>ダウンロード</h3>
<ul>
<li><a href="data/bxsuika.zip"><!--
-->圧縮ファイル bxsuika.zip (v0.3)のダウンロード</a>
</li>
</ul>

<p>インストール方法については、パッケージに含まれる
説明書（README ファイル）を参照。 
</p>

</div><!--ssec-download-->

</div><!--sec-overview-->

<div class="section" id="sec-basic">
<h2>基本的な使用法</h2>

<div class="subsection" id="ssec-latex">
<h3>文書作成</h3>

<p>bxsuika パッケージを次のようにして読み込む。
</p>
<pre>
\usepackage[driver=&#x2039;ドライバ&#x203A;,mincho=&#x2039;明朝&#x203A;,gothic=&#x2039;ゴシック&#x203A;]{bxsuika}
</pre>
<p><code>&#x2039;明朝&#x203A;</code>、<code>&#x2039;ゴシック&#x203A;</code>には
明朝体とゴシック体として用いる日本語フォントの<em>ファイル名</em>（ipam.ttf
等；「IPA明朝」等のフォント名ではない）を指定する。
TrueType／OpenType（拡張子 .ttf／.otf）形式のフォントが使えるが、
TTC 形式（拡張子 .ttc；例えば MS フォントとか）は使えない。
</p>
<p><code>&#x2039;ドライバ&#x203A;</code> は実際に使う処理系を
<code>pdftex</code> / <code>dvipdfmx</code> / <code>none</code> から
選択するが、<code>driver</code> を指定しないと、自動的に <code>pdftex</code>
と <code>dvipdfmx</code> のうち適当な方が選ばれるので、
通常は指定する必要はない。
</p>
<div class="bend">
<span class="lbl">参考：</span> <code>none</code> は pdfTeX
と dvipdfmx 以外の DVI ドライバを使う時に設定する。
この場合、<code>mincho</code>／<code>gothic</code> による
フォント設定は無効となり、そのドライバのためのフォント設定を
別個に行う必要がある。
</div>

<p>以下に日本語を含む文書の例を示す。
</p>

<pre>
% このファイルの文字コードは Shift_JIS
% pdflatex (または latex) で組版する
\documentclass[a4paper]{article} % 欧文用クラスを指定する。
  % 明朝を「IPA明朝」、ゴシックを「IPAゴシック」にする
\usepackage[mincho=ipam.ttf,gothic=ipag.ttf]{bxsuika}
\usepackage[scale=.8]{geometry}
\newcommand*{\jRead}[1]{{\footnotesize #1}}
\newcommand*{\xAnnot}[1]{{\small(\textsl{#1})}}
\begin{document}

\section*{Greeting Expressions in Japanese (挨拶\jRead{あいさつ}の表現)}
  % 内容は気にしない ;-)
\begin{center}\begin{tabular}{p{10em}p{20em}}
\hline\hline
\multicolumn{1}{c}{English} & \multicolumn{1}{c}{Japanese (日本語)}
\\\hline
Good morning!
&
おはようございます。\xAnnot{formal}\newline
おはよう。\xAnnot{informal}
\\\hline
How are you?
&
お元気ですか。\xAnnot{formal}\newline
もうかりまっか。\xAnnot{in the Kansai region}
\\\hline
Happy New Year!
&
明けましておめでとうございます。\xAnnot{formal}\newline
あけましておめでとう。\xAnnot{informal}\newline
あけおめー！\xAnnot{very colloquial}
\\\hline\hline
\end{tabular}\end{center}

Note that in Japanese culture greetings on New Year (正月\jRead{しょうがつ})
are not made until New Year's Day has come, thus there is no period
where greetings on New Year and Christmas (クリスマス) are simultanously made.
Consequently there is no Japanese phrase that directly corresponds to
``Merry Christmas and Happy New Year!''.
\end{document}
</pre>
<div align="center" class="display">
<div class="imagebox" style="width:992px">
<img src="sample/bxsuika-sample01.png" width="992" height="380">
</div></div>


<p>基底言語が英語の例を示したのは、現状では使用できる文書クラスが
欧文用のものしかないからである。
日本語の文書に適したレイアウトにするには種々の工夫が必要となる。
パッケージに含まれるサンプル sample-bxsuika.org.tex は
日本語の文書の例である。
</p>

</div><!--ssec-latex-->

<div class="subsection" id="ssec-compile">
<h3>コンパイル</h3>

<p>和文文字を含むファイルを topdftex で変換する。
変換後のファイルは pdflatex 等の欧文 LaTeX 処理系で組版できる。
pdflatex を使う場合は次のようになる。
</p>
<pre>
# (元の LaTeX 文書を foo.org.tex とする)
topdftex foo.org.tex foo.tex
pdflatex foo.tex
# (PDF 文書を foo.pdf が生成される)
</pre>

<p>日本語を pdfTeX で通すのがパッケージの主目的であるが、
なぜか dvipdfmx でも通るようになっている。
dvipdfmx を使う場合は次のようになる。
</p>
<pre>
# (元の LaTeX 文書を foo.org.tex とする)
topdftex foo.org.tex foo.tex
# 欧文用の latex を使う
latex foo.tex
dvipdfmx foo.dvi
# (PDF 文書を foo.pdf が生成される)
</pre>
<p>他にも、latex で生成された DVI ファイルを dvipng などの
欧文 DVI 用の DVI ウェアに通す等の利用方法が考えられる。
（ただしこの用途なら <a href="./pxtosb.html">PXtosb バンドル</a>の
方が適切である。）
詳しくは説明書（README ファイル）を参照。
</p>

</div><!--ssec-compile-->

<div class="subsection" id="ssec-bookmark">
<h3>日本語しおりの作成</h3>

<div class="important">
<span class="lbl">重要：</span>
以下の例はまだ正常に動作しない。原因を検討中である…。
</div>

<p>hyperref を用いて日本語のしおりを作成するには W32TeX の out2uni
プログラム（dvipdfm-w32.tar.bz2 アーカイブに含まれる）を併用する。
</p>
<p>以下では、次のファイル sample.org.tex を例として具体的な
手順を述べる。
</p>
<pre>
% sample.org.tex
% このファイルの文字コードは Shift_JIS
\documentclass[a4paper]{article}
\usepackage[mincho=ipam.ttf,gothic=ipag.ttf]{bxsuika}
\usepackage[scale=.8]{geometry}
\usepackage[pdftex,
  bookmarks=true,bookmarksnumbered=true,bookmarkstype=toc]{hyperref}
\begin{document}
\title{pdf\LaTeXe\ 怪文書作成入門}
\author{絶対匿名希望}
\maketitle
\section{美しい怪文書組版のために}
（この節は書きかけです。執筆者を募集しております。\&lt;）
\section{pdf\LaTeXe\ の紹介}
（この節は書きかけです。執筆者を募集しております。\&lt;）
\section{以下省略}
\end{document}
</pre>
<div class="bend">
<span class="lbl">参考：</span> 上のソース中で <code>\&lt;</code>
は「半角幅だけ戻る」命令である。
bxsuika では和文文字はベタ組されるので、そのままでは
〈。〉と〈）〉の間に余分な間隔が生じる。
<code>\&lt;</code> はこれを除去している。
なお、<code>\&lt;</code> はその箇所での改行を禁止する。
改行を許可したい場合は代わりに <code>\&lt;*</code> を用いる。
</div>

<p>これを組版して PDF 文書 sample.pdf を得る手順は次のようになる。
</p>
<pre>
topdftex sample.org.tex sample.tex
pdflatex sample.tex
# (ここで sample.out が生成されるので、それに変換をかける)
out2uni sample.out
pdflatex sample.tex
</pre>
<div class="bend">
<span class="lbl">参考：</span> 相互参照の解決等のために pdflatex
を 3 回以上実行する必要がある場合は、out2uni は最後の 1 回の
直前に実行する。
</div>



</div><!--ssec-bookmark-->
</div><!--sec-basic-->

</div><!--maintext-->

<div id="navibar-sub">
<div class="rightpart">
<a href="#canvas">先頭へ</a>
</div>
<div class="leftpart">
<span class="navilang">
| <span class="na">en</span>
| <span class="here">ja</span> |
</span>&nbsp;
<a href="./index.html">トップ</a> &gt;
<span class="here">BXsuika パッケージ</span>
<div class="clearright"></div>
</div>
</div><!--navibar-sub-->
<div id="footer">
<div id="counter-mini"></div>
<div id="copyright">
Copyright &copy; 2009 ZR (Takayuki YATO)
&lt;zrbabbler<!--@gmail
-->&#64;<span class="hdn">(at)</span>yaho<!--.or
-->o.<span class="hdn">(dot)</span>co<!--.tokyo
-->.<span class="hdn">(dot)</span>jp&gt;<br>
Last updated: 2009-05-31
</div>

</div><!--footer-->

</div><!--main-->
</div><!--***********************************************************-->
</body>
</html>
